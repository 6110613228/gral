description = 'GRAL core'

dependencies {
	testCompile(group: 'junit', name: 'junit', version:'4.10')
}

apply plugin: "checkstyle"

checkstyle {
	configFile = new File("${projectDir}/src/etc/checkstyle.xml")
}

buildscript {
	apply from: 'https://github.com/valkolovos/gradle_cobertura/raw/master/repo/gradle_cobertura/gradle_cobertura/1.0/coberturainit.gradle'
}

task report(dependsOn: "cobertura") {
	description = "Generates reports."
}

apply plugin: "distribution"
distributions {
	main {
		contents {
			from(rootDir) {
				include("CHANGES")
				include("README")
			}
			from(projectDir) {
				include("src/**")
			}
			into("doc") {
				into("javadoc") {
					from javadoc
				}
				into("rst") {
					from("${projectDir}/src/rst")
				}
			}
			into("lib") {
				from jar
				from configurations.runtime
			}
		}
	}
}

apply plugin: 'maven'
uploadArchives {
	repositories {
		mavenDeployer {
			repository(url: "http://mvn.erichseifert.de/maven2") {
				authentication(userName: "mavenUser", password: "mavenPassword")
			}
			pom.project {
				inceptionYear(inceptionYear)
				licenses {
					license {
						name("GNU Library or Lesser General Public License (LGPL)")
						url("http://www.gnu.org/licenses/lgpl.txt")
						distribution("main")
					}
				}
				issueManagement {
					system("trac")
					url("http://trac.erichseifert.de/gral/")
				}
				scm {
					connection("scm:git:git://erichseifert.de/gral.git")
					developerConnection("scm:git:ssh://git@erichseifert.de/gral.git")
					tag("HEAD")
				}
			}
		}
	}
}